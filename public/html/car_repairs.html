<div class="page-data">
    <h1 cellpadding="11" class="label">What has been repaired for: {{car_make}} {{car_model}}</h1>

<form name="carRepairsForm" method="POST">

    <div class="data-table">
      
        <div>
            <a href="" class="a-inside edit" ng-click="addNewRepairGeneral();">Add new repair</a>
            </br>
            </br>
        </div>

        <table border="1" cellpadding="7" cellspacing="7">
            <tr>
                <th width="50px">Repair Id</th>
                <th>Car Id</th>
                <th>Repair date</th>
                <th>Repaired part</th>
                <th>Comments</th>
                <th width="120px">Action</th>
            </tr>
            <tr ng-repeat="carRepair in carRepairs" on-finish-render="test()" ng-init="carRepair.editMode = false">
                
                <td>{{carRepair.repair_id}}</td>

                <td>{{carRepair.car_id}}</td>

                <td ng-if="!carRepair.editMode" > {{carRepair.repair_date}} </td>
                <td ng-if="carRepair.editMode"><input type="id" ng-model="carRepair.repair_date" required></input></td>

                <td ng-if="!carRepair.editMode" > {{carRepair.repaired_part}} </td>
                <td ng-if="carRepair.editMode"><input type="id"  name="part{{$index}}" ng-model="carRepair.repaired_part"  minlength="2" maxlength="100" required></input>
                    <!-- <div ng-messages="carRepairsForm['part'+$index].$error" ng-if="carRepairsForm['part'+$index].$dirty"> -->
                    <div ng-messages="carRepairsForm['part'+$index].$error">
                        <div ng-message="required"><p>Please enter part that has been repaired</p></div>
                        <div ng-message="minlength"><p>At least 2 symbols</p></div>
                        <div ng-message="maxlength"><p>Entry is too long</p></div>
                    </div>
                </td>

                <td ng-if="!carRepair.editMode" > {{carRepair.comments}} </td>
                <td ng-if="carRepair.editMode"><input type="id"  name="comments{{$index}}" ng-model="carRepair.comments" minlength="5" maxlength="100" required></input>
                    <!-- <div ng-messages="carRepairsForm['comments'+$index].$error" ng-if="carRepairsForm['comments'+$index].$dirty"> -->
                    <div ng-messages="carRepairsForm['comments'+$index].$error">
                        <div ng-message="required"><p>Please enter comment</p></div>
                        <div ng-message="minlength"><p>At least 5 symbols</p></div>
                        <div ng-message="maxlength"><p>Entry is too long</p></div>
                </div>
                </td>

                <td width="200px">

                <a href="" class="a-inside edit"
                ng-show="!carRepair.editMode"
                ng-click="changeMode(carRepair);">Edit</a>

                <a href="" class="a-inside edit"
                ng-class="{disabled: carRepairsForm['part'+$index].$invalid || carRepairsForm['comments'+$index].$invalid}" 
                ng-show="carRepair.editMode && !carRepair.newRepair"
                ng-click="updateRepairInfoByRepairId(carRepair);">Update</a>

                <a href="" class="a-inside edit"
                ng-class="{disabled: carRepairsForm['part'+$index].$invalid || carRepairsForm['comments'+$index].$invalid}" 
                ng-show="carRepair.editMode && carRepair.newRepair"
                ng-click="addNewRepairInfo(carRepair);">Add</a>
                
                <a href="" class="a-inside edit"
                ng-class="{disabled: carRepairsForm['part'+$index].$invalid || carRepairsForm['comments'+$index].$invalid}" 
                ng-show="carRepair.editMode && !carRepair.newRepair"
                ng-click="changeMode(carRepair)" >Cancel</a>

                <a href="" class="a-inside edit"
                ng-show="carRepair.editMode && carRepair.newRepair"
                ng-click="removeRepairFromList(); changeMode(carRepair)" >Cancel adding</a>
                
                <!-- <a class="a-inside delete" href="#!delete_customer/delete/{{customer.id}}">Delete</a> -->
                
                <a href="" class="a-inside delete" ng-show="!carRepair.editMode" ng-click="deleteRepairInfoByRepairId(carRepair);">Delete</a>
                
                </td>
                </tr>
                
                </table>
              
                <div>

                </br>
                <a href="#!cars/" class="a-inside edit">Back to cars list</a>

                </div>
    </div>
</form>
</div>








                    <!-- <form ng-submit="addNew()">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" ng-model="selectedAll" ng-click="checkAll()" />
                                </th>
                                <th>Firstname</th>
                                <th>Lastname</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="personalDetail in personalDetails">
                                <td>
                                    <input type="checkbox" ng-model="personalDetail.selected" />
                                </td>
                                <td>
                                    <input type="text" class="form-control" ng-model="personalDetail.fname" required/>
                                </td>
                                <td>
                                    <input type="text" class="form-control" ng-model="personalDetail.lname" required/>
                                </td>
                                <td>
                                    <input type="email" class="form-control" ng-model="personalDetail.email" required/>
                                </td>
                                <td width="300px">

                                    <a href="" class="a-inside edit" ng-click="changeMode(carRepair); test(carRepair)" >Edit</a>
                                    <a href="#!/car_repair/update/{{carRepair.repair_id}}" class="a-inside edit" ng-show="!carRepair.editMode" ng-click="changeMode(carRepair)">Save</a>
                                    <a href="" class="a-inside edit" ng-click="updateRepairInfoByRepairId(carRepair); changeMode(carRepair);">Update</a>
                                    <a href="" class="a-inside edit" ng-click="changeMode(carRepair)" >Cancel</a>

                                </td>
                            </tr>
                        </tbody>
                    </table>
                
                    <div class="form-group">
                        <input ng-hide="!personalDetails.length" type="button" class="btn btn-danger pull-right" ng-click="remove()" value="Remove">
                        <input type="submit" class="btn btn-primary addnew pull-right" value="Add New">
                    </div>
                </form> -->